
<!DOCTYPE html>
<html>
<head>
  <title>Pie Chart with Animations</title>
  <style>
    canvas {
      border: 1px solid #000;
    }
  </style>
</head>
<body>
  <canvas id="chartCanvas" width="400" height="400"></canvas>

  <script>
    // Data for the pie chart (values and corresponding colors)
    var data = [
      { value: 60, color: "#F44336" },
      { value: 40, color: "#2196F3" },
      // { value: 15, color: "#4CAF50" },
      // { value: 10, color: "#FFEB3B" },
      // { value: 25, color: "#9C27B0" }
    ];

    // Animation duration (in milliseconds)
    var animationDuration = 1000;

    // Easing function for smooth animation
    function easeIn(t) {
      return t * t;
    }

    var canvas = document.getElementById("chartCanvas");
    var ctx = canvas.getContext("2d");
    var centerX = canvas.width / 2;
    var centerY = canvas.height / 2;
    var radius = Math.min(centerX, centerY) - 10;

    function drawPieChart(animationProgress) {
      var totalValue = data.reduce(function(sum, d) {
        return sum + d.value;
      }, 0);

      var startAngle = -Math.PI / 2; // Start angle at 12 o'clock position

      data.forEach(function(d) {
        var progress = easeIn(animationProgress); // Apply easing function to animation progress
        var endAngle = startAngle + (2 * Math.PI * d.value) / totalValue * progress;

        ctx.beginPath();
        ctx.moveTo(centerX, centerY);
        ctx.arc(centerX, centerY, radius, startAngle, endAngle, false);
        ctx.fillStyle = d.color;
        ctx.fill();
        ctx.closePath();

        startAngle = endAngle;
      });
    }

    function animatePieChart(timestamp) {
      console.log('!@#hi', timestamp)
      var progress = timestamp / animationDuration;
      var animationProgress = Math.min(progress, 1);

      ctx.clearRect(0, 0, canvas.width, canvas.height);
      drawPieChart(animationProgress);

      if (progress < 1) {
        requestAnimationFrame(animatePieChart);
      }
    }

    // Trigger animation
    requestAnimationFrame(animatePieChart);
  </script>
</body>
</html>
